From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: oddlama <oddlama@oddlama.org>
Date: Mon, 10 Feb 2026 12:00:00 +0100
Subject: [PATCH 1/2] use in-memory graphql schema

Use in-memory schema generation instead of writing to disk.
This avoids issues with read-only filesystems in production.
---
 packages/backend/server/src/base/graphql/index.ts | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

diff --git a/packages/backend/server/src/base/graphql/index.ts b/packages/backend/server/src/base/graphql/index.ts
index 57da5da..1234567 100644
--- a/packages/backend/server/src/base/graphql/index.ts
+++ b/packages/backend/server/src/base/graphql/index.ts
@@ -1,7 +1,5 @@
 import './config';

-import { join } from 'node:path';
-
 import type { ApolloDriverConfig } from '@nestjs/apollo';
 import { ApolloDriver } from '@nestjs/apollo';
 import { Global, Module } from '@nestjs/common';
@@ -33,12 +31,7 @@ export type GraphqlContext = {
           useGlobalPrefix: true,
           graphiql: env.NODE_ENV === NodeEnv.Development,
           sortSchema: true,
-          autoSchemaFile: join(
-            env.projectRoot,
-            env.testing
-              ? './node_modules/.cache/schema.gql'
-              : './src/schema.gql'
-          ),
+          autoSchemaFile: true,
           path: '/graphql',
           csrfPrevention: {
             requestHeaders: ['content-type'],
--
2.45.0

